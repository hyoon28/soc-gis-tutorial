[["index.html", "Spatial Data and Mapping for Sociologists Chapter 1 About 1.1 Table of Contents", " Spatial Data and Mapping for Sociologists Hesu Yoon Last updated: 2024-10-03 Chapter 1 About The social life is embedded in space. The advent of digital technology, once believed to jeopardize the significance of space, mediates and reconfigures how people experience and navigate places. From pandemic to climate change to globalizing gentrification and migration, there are abundant sociological inquiries that require the understanding of how social groups, institutions, and resources are spatially organized. This module is designed to equip students with tools that will help them explore these topics. The following is a series of tutorials prepared for the Spatial Data and Mapping module from Advanced Quantitative Methods in Contemporary Sociology course. This module specifically aims to teach students how to gather, process, and visualize spatial data for sociological research. Some prior experience or familiarity with quantitative data and statistical software (R) is necessary to follow the tutorials. However, no prior experience in spatial data and/or software is assumed. Each tutorial is a chapter in this website. You can navigate through the chapters using the sidebar. 1.1 Table of Contents Different types of spatial data Geocoding, spatial join, mapping Mapping (continued) "],["emplacing-demographic-data.html", "Chapter 2 Emplacing demographic data 2.1 Defining a geographic unit (boundaries) 2.2 Think and share 2.3 Joining attributes 2.4 Creating demographic measures", " Chapter 2 Emplacing demographic data In this chapter, we will discuss demographic data nested in places, which is often used in sociological research. Sociologists often study where people live and move to. Topics like migration, segregation, gentrification, integration/assimilation, and diversity/fractionalization can be studied using aggregated demographic data for a given geographic unit. To conduct such analysis, defining a geographic unit and boundary suitable for your research question is critical. 2.1 Defining a geographic unit (boundaries) Geographic units can be defined and drawn at various levels, from nations to cities to neighborhoods. Territories are contested and (re)defined through social processes, therefore, it is important to clearly define and justify your choice of spatial boundary as a unit of analysis. Urban sociologists, for instance, tend to focus on studying neighborhood dynamics. But what are neighborhoods? While government-defined census tracts are often used as a proxy for neighborhoods in quantitative social science research, some scholars choose to analyze other types of boundaries, such as “community areas” that are more meaningful to its residents. THE CASE OF SAN FRANCISCO Let’s demonstrate the importance of defining a geographic unit using the case of San Francisco. San Francisco’s neighborhood names and boundaries have changed over time [1] and the current names and boundaries are often inconsistently perceived and administered [2]. Source: SFGATE In this tutorial, I visualize San Francisco neighborhoods based on census tracts as well as the “Analysis Neighborhood” created by the city officials. Many US city governments provide their local data through Open Data websites, including San Francisco’s [DataSF] (https://datasf.org/opendata/). You want to look for “Geographic Locations &amp; Boundaries” tab. DataSF is an open data website provided by the city government of San Francisco Here, you will find the 2010 census tract and “Analysis Neighborhood” boundaries, among many other geographic data. Geographic boundaries data can come in various formats, like geojson, shapefiles, etc. In this tutorial, we use geojson files. You can download all the data used in this class here. Geographic boundaries are “polygons” We use sf package in R to handle spatial data. Set up and import geojson files. # First, you will have to set up by installing and calling the sf package. install.packages(&quot;sf&quot;) #install the package if you haven&#39;t. library(sf) # Import neighborhood boundaries data (polygons) sfnh &lt;- st_read(&quot;tutorial/data/sfnh.geojson&quot;) # for &quot;Analysis Neighborhood&quot; boundaries sftrt &lt;- st_read(&quot;tutorial/data/sftrt_clean.geojson&quot;) # for census tracts You can treat these sf objects as if they are data frames. # Overview of variables head(sfnh, 3) ## Simple feature collection with 3 features and 1 field ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.4761 ymin: 37.70833 xmax: -122.3983 ymax: 37.79037 ## Geodetic CRS: WGS 84 ## nhood geometry ## 1 Western Addition MULTIPOLYGON (((-122.4214 3... ## 2 West of Twin Peaks MULTIPOLYGON (((-122.461 37... ## 3 Visitacion Valley MULTIPOLYGON (((-122.4039 3... # Transform an sf object into a simple one data frame (without geometries) sfnh_wo_geo &lt;- st_drop_geometry(sfnh) head(sfnh_wo_geo, 3) ## nhood ## 1 Western Addition ## 2 West of Twin Peaks ## 3 Visitacion Valley # Displaying geometry only - compare how boundaries differ! library(mapsf) # we will learn more about mapping in detail in the following tutorials. mf_map(sfnh, col = &quot;ivory4&quot;, border = &quot;ivory&quot;) mf_label( x = sfnh, var = &quot;nhood&quot;, col= &quot;black&quot;, halo = TRUE, overlap = FALSE, lines = FALSE, cex = 0.5 ) # display neighborhood names mf_title(txt = &quot;Analysis Neighborhood&quot;) mf_map(sftrt, col = &quot;ivory4&quot;, border = &quot;ivory&quot;) mf_title(txt = &quot;2010 Census&quot;) In my research, for example, I ask: How do Airbnb hosts use neighborhood names to market their properties? To answer this question, using census tract boundaries doesn’t really make sense because they don’t carry meanings. Rather, it would be more suitable to use boundaries such as Analysis Neighborhood. 2.2 Think and share Are you interested in nations, cities, regions, or neighborhoods? What spatial question do you have about them? How will you define their boundaries? Think about a geographic unit that you are interested in exploring. Define and justify your boundary. Test! Want to learn more? https://www.sfgate.com/places/article/What-did-your-neighborhood-used-to-be-called-15098783.php https://www.sfchronicle.com/projects/2022/san-francisco-neighborhoods/ https://www.nytimes.com/interactive/2023/upshot/extremely-detailed-nyc-neighborhood-map.html 2.3 Joining attributes Geographic boundaries alone don’t tell us much about what is social about them. Sociologists, and social scientists more broadly, often are interested in people in these places. Therefore, matching aggregated demographic data with the geographic boundaries is a crucial next step. We can merge a sf object with a data frame containing demographic attributes using the function merge(). Be careful with the order of the arguments, the returned object will be of the same type as x. It is not possible to do an attribute join using two sf objects. # Import demographic attributes sfdem &lt;- read.csv(&quot;tutorial/data/sfdem.csv&quot;) # Check common identifier names(sfdem) ## [1] &quot;nhood&quot; &quot;tpop&quot; &quot;pyoung&quot; &quot;pcol&quot; &quot;minc&quot; &quot;mhval&quot; ## [7] &quot;mrent&quot; &quot;pwhite&quot; &quot;pblack&quot; &quot;pasian&quot; &quot;phisp&quot; &quot;tpop17&quot; ## [13] &quot;pyoung17&quot; &quot;pcol17&quot; &quot;minc17&quot; &quot;mhval17&quot; &quot;mrent17&quot; &quot;gentcat&quot; ## [19] &quot;pwhite17&quot; &quot;pblack17&quot; &quot;pasian17&quot; &quot;phisp17&quot; # Yes, in both data sets, &quot;nhood&quot; exists. # Join attributes to geometry sf_joined &lt;- merge( x = sfnh, # sf object y = sfdem, # data frame by.x = &quot;nhood&quot;, # x identifier by.y = &quot;nhood&quot;, # y identifier all.x = TRUE # keep all lines ) # Check the joined data head(sf_joined, 3) ## Simple feature collection with 3 features and 22 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.4479 ymin: 37.70835 xmax: -122.357 ymax: 37.7696 ## Geodetic CRS: WGS 84 ## nhood tpop pyoung pcol minc mhval mrent ## 1 Bayview Hunters Point 34834.88 25.11909 13.09727 68944.42 383179.6 948.6696 ## 2 Bernal Heights 24952.09 29.74500 39.13500 95689.95 537924.0 1449.2704 ## 3 Castro/Upper Market 20037.68 35.27500 63.81000 109990.94 872713.1 1613.5698 ## pwhite pblack pasian phisp tpop17 pyoung17 pcol17 minc17 ## 1 5.657989 45.322281 26.27249 16.296813 37917 24.14091 29.18273 63772.3 ## 2 38.517951 6.560709 16.87636 33.360004 25167 21.51000 58.98167 139612.5 ## 3 77.062002 2.860599 7.25898 9.031316 22502 30.88167 78.36000 159149.2 ## mhval17 mrent17 gentcat pwhite17 pblack17 pasian17 phisp17 ## 1 737920 1402.455 non-gentrifying 7.962128 25.289448 38.64493 23.443310 ## 2 1184217 1877.667 nongentable-ascending 47.709302 4.072794 17.05805 26.276473 ## 3 1323100 2225.833 nongentable-ascending 68.896098 3.146387 14.38983 8.030397 ## geometry ## 1 MULTIPOLYGON (((-122.3816 3... ## 2 MULTIPOLYGON (((-122.4036 3... ## 3 MULTIPOLYGON (((-122.4266 3... Now, we are able to explore neighborhood-level characteristics. # Select rows sf_joined[1:2,] ## Simple feature collection with 2 features and 22 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.4286 ymin: 37.70835 xmax: -122.357 ymax: 37.75319 ## Geodetic CRS: WGS 84 ## nhood tpop pyoung pcol minc mhval mrent ## 1 Bayview Hunters Point 34834.88 25.11909 13.09727 68944.42 383179.6 948.6696 ## 2 Bernal Heights 24952.09 29.74500 39.13500 95689.95 537924.0 1449.2704 ## pwhite pblack pasian phisp tpop17 pyoung17 pcol17 minc17 ## 1 5.657989 45.322281 26.27249 16.29681 37917 24.14091 29.18273 63772.3 ## 2 38.517951 6.560709 16.87636 33.36000 25167 21.51000 58.98167 139612.5 ## mhval17 mrent17 gentcat pwhite17 pblack17 pasian17 phisp17 ## 1 737920 1402.455 non-gentrifying 7.962128 25.289448 38.64493 23.44331 ## 2 1184217 1877.667 nongentable-ascending 47.709302 4.072794 17.05805 26.27647 ## geometry ## 1 MULTIPOLYGON (((-122.3816 3... ## 2 MULTIPOLYGON (((-122.4036 3... # Select columns sf_joined[, &quot;tpop&quot;] ## Simple feature collection with 41 features and 1 field ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.5149 ymin: 37.70813 xmax: -122.357 ymax: 37.8333 ## Geodetic CRS: WGS 84 ## First 10 features: ## tpop geometry ## 1 34834.88 MULTIPOLYGON (((-122.3816 3... ## 2 24952.09 MULTIPOLYGON (((-122.4036 3... ## 3 20037.68 MULTIPOLYGON (((-122.4266 3... ## 4 14360.00 MULTIPOLYGON (((-122.4062 3... ## 5 37063.83 MULTIPOLYGON (((-122.424 37... ## 6 9929.22 MULTIPOLYGON (((-122.3875 3... ## 7 8053.00 MULTIPOLYGON (((-122.4474 3... ## 8 137.00 MULTIPOLYGON (((-122.4409 3... ## 9 17009.00 MULTIPOLYGON (((-122.432 37... ## 10 16915.00 MULTIPOLYGON (((-122.4208 3... # Filter sf_joined[sf_joined$nhood == &quot;Mission&quot;, ] ## Simple feature collection with 1 feature and 22 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.4269 ymin: 37.74783 xmax: -122.403 ymax: 37.77564 ## Geodetic CRS: WGS 84 ## nhood tpop pyoung pcol minc mhval mrent pwhite ## 19 Mission 60202.03 39.93308 33.86769 76201.05 634583.3 1267.62 32.5255 ## pblack pasian phisp tpop17 pyoung17 pcol17 minc17 mhval17 ## 19 2.973325 11.01126 50.07308 58770 34.39923 57.20385 125000.2 1106315 ## mrent17 gentcat pwhite17 pblack17 pasian17 phisp17 ## 19 1870.846 gentrifying 41.09069 3.660031 14.46827 35.66786 ## geometry ## 19 MULTIPOLYGON (((-122.411 37... # Filter and select sf_joined[sf_joined$nhood == &quot;Mission&quot;, &quot;phisp17&quot;] ## Simple feature collection with 1 feature and 1 field ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -122.4269 ymin: 37.74783 xmax: -122.403 ymax: 37.77564 ## Geodetic CRS: WGS 84 ## phisp17 geometry ## 19 35.66786 MULTIPOLYGON (((-122.411 37... Exercise Below, you see two maps displaying Chicago ans Seattle. What are the boundaries? What attribute is displayed in the map? Is this attribute quantitative or qualitative? 2.4 Creating demographic measures With spatial data merged with demographic attributes, we can create demographic measures of interest. Here, I introduce three key measures used in urban scholarship: gentrification and diversity. Gentrification - qualitative, typology Diversity - quantitative, chereology Data sources Aggregated demographic data and spatial boundaries are collected and disseminated by national and municipal government, as well as international organizations (e.g., United Nations). "],["insfratructure-and-institutions-point-of-interest-data.html", "Chapter 3 Insfratructure and Institutions: Point of interest data 3.1 Geocoding 3.2 Spatial join", " Chapter 3 Insfratructure and Institutions: Point of interest data Google Places API 3.1 Geocoding 3.2 Spatial join "],["mapping.html", "Chapter 4 Mapping", " Chapter 4 Mapping is it qualitative or quantitative (average make sense?) 1.1 if qualitative, use different colors or shapes (nominal or ordinal variables) –&gt; typology map e.g., gentrifying vs. non-gentrifying tracts does the sum make sense? 2.1 absolute - size (e.g., total population, total number of museums) –&gt; proportional symbol 2.2. relative - color gradiation (e.g., % white; diversity index/segregation index) –&gt; chorolpeth map "],["explore-further-other-types-of-spatial-data.html", "Chapter 5 Explore further: Other types of spatial data", " Chapter 5 Explore further: Other types of spatial data Mobility data Crime rates Voting behaviors "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
